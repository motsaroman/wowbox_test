import { useEffect } from "react";
import { useNavigate } from "react-router-dom";
import styles from "./PrivacyPolicy.module.css";

export default function PrivacyPolicy({ isOpen = true, onClose }) {
  const navigate = useNavigate();

  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = "hidden";
    } else {
      document.body.style.overflow = "unset";
    }
    return () => {
      document.body.style.overflow = "unset";
    };
  }, [isOpen]);

  const handleClose = () => {
    if (onClose) {
      onClose();
    } else {
      navigate('/');
    }
  };

  if (!isOpen) return null;

  return (
    <div className={styles.container}>
      <div className={styles.header}>
        <h1 className={styles.title}>Политика конфиденциальности</h1>
        <button className={styles.closeButton} onClick={handleClose}>
          ✕
        </button>
      </div>

      <div className={styles.content}>
        <h2 className={styles.subtitle}>1. Общие положения</h2>
        <p className={styles.paragraph}>
          Настоящая Политика конфиденциальности (далее – «Политика») определяет
          порядок обработки персональных данных пользователей интернет-магазина
          wowbox.market (далее – «Сайт»), принадлежащего ООО "ИНВОРЛДС" (ОГРН:
          1241600048689, ИНН: 1683023860), адрес: 420500, Республика Татарстан,
          г. Иннополис, ул. Университетская, д. 5 (далее – «Оператор», «мы»).
          Политика разработана в соответствии с Федеральным законом от
          27.07.2006 №152-ФЗ "О персональных данных", Федеральным законом от
          13.03.2006 №38-ФЗ "О рекламе" и Законом РФ "О защите прав
          потребителей". Используя Сайт, оформляя заказ или заполняя веб-форму,
          вы свободно, своей волей и в своем интересе подтверждаете, что
          ознакомились с настоящей Политикой, даете согласие на обработку
          персональных данных и подтверждаете достоверность предоставляемых
          данных. Если вы не согласны с условиями, не используйте Сайт.
        </p>
        <h2 className={styles.subtitle}>2. КАКИЕ ДАННЫЕ МЫ СОБИРАЕМ</h2>
        <p className={styles.paragraph}>
          При оформлении заказа мы собираем: имя, фамилию, номер телефона,
          email, адрес доставки, никнейм в Telegram (опционально), комментарий к
          заказу. Если подарок предназначен другому человеку – имя, телефон и
          адрес получателя. Для персонализации бокса: пол получателя, интересы,
          предпочтения, ограничения по товарам, дополнительные пожелания.
          Автоматически собираются технические данные: IP-адрес, тип устройства
          и браузера, cookie, источник перехода, просмотренные страницы, дата и
          время посещения. О заказе: номер заказа, состав, статус, способ оплаты
          (без данных карт), способ доставки, трек-номер, примененные промокоды.
          Важно: Данные банковских карт обрабатываются платежной системой и НЕ
          передаются и НЕ хранятся нами.
        </p>
        <h2 className={styles.subtitle}>3. ДЛЯ ЧЕГО МЫ ОБРАБАТЫВАЕМ ДАННЫЕ</h2>
        <p className={styles.paragraph}>
          Исполнение договора: обработка заказов, организация доставки,
          коммуникация по заказу, формирование документов, обработка возвратов и
          претензий. Работа Сайта: техподдержка, безопасность платежей,
          предотвращение мошенничества, контроль промокодов, применение
          специальных условий. Улучшение услуг: анализ предпочтений,
          совершенствование персонализации, повышение качества обслуживания,
          тестирование новых функций. Маркетинг (при согласии): email-рассылки о
          товарах, акциях и спецпредложениях, напоминания о незавершенных
          заказах. Вы можете отказаться в любой момент через ссылку в письме или
          написав на hello@wowbox.market Законодательство: соблюдение требований
          налогового и бухгалтерского учета.
        </p>
        <h2 className={styles.subtitle}>4. ПЕРЕДАЧА ДАННЫХ ТРЕТЬИМ ЛИЦАМ</h2>
        <p className={styles.paragraph}>
          Мы передаем минимально необходимые данные только проверенным партнерам
          для исполнения заказа: службам доставки (для организации доставки),
          платежным системам (для обработки платежей), CRM-системам (для
          управления заказами), сервисам email и SMS-рассылок (для уведомлений).
          Также используем сервисы веб-аналитики и ретаргетинга в обезличенном
          виде. При передаче данных партнерам заключаются соглашения о
          конфиденциальности с ограничением целей обработки и запретом на
          передачу третьим лицам. Мы обязаны передать данные государственным
          органам по официальному письменному запросу в соответствии с
          законодательством РФ (Роскомнадзор, налоговые органы,
          правоохранительные органы).{" "}
          <strong>
            Мы НЕ продаем и НЕ передаем ваши данные для коммерческих целей
            третьих лиц.
          </strong>
        </p>
        <h2 className={styles.subtitle}>5. ВАШИ ПРАВА</h2>
        <p className={styles.paragraph}>
          Вы имеете право получить информацию об обрабатываемых данных,
          требовать их уточнения или удаления (кроме случаев обязательного
          хранения по закону), ограничить обработку, отозвать согласие, получить
          копию данных, отказаться от рекламных рассылок, обжаловать действия
          Оператора в Роскомнадзоре или суде. Для реализации прав направьте
          запрос на email: hello@wowbox.market или почтовый адрес: 420500,
          Республика Татарстан, г. Иннополис, ул. Университетская, д. 5, ООО
          "ИНВОРЛДС". Укажите ФИО, контакты, суть запроса и приложите скан
          документа, удостоверяющего личность. Срок рассмотрения: 30 дней.
          Согласие на обработку данных является бессрочным и может быть отозвано
          письменным заявлением. При отзыве мы прекращаем обработку и уничтожаем
          данные в установленные законом сроки, за исключением случаев
          обязательного хранения. Мы НЕ можем удалить данные, если их хранение
          обязательно по закону (бухучет – 3 года), необходимо для защиты наших
          прав в судебных спорах или для исполнения активных заказов.
        </p>
        <h2 className={styles.subtitle}>6. БЕЗОПАСНОСТЬ ДАННЫХ</h2>
        <p className={styles.paragraph}>
          Мы применяем технические и организационные меры защиты: SSL/TLS
          шифрование при передаче, шифрование при хранении, хеширование паролей,
          межсетевые экраны, системы обнаружения вторжений, антивирусное ПО,
          индивидуальные учетные записи с парольной защитой, двухфакторная
          аутентификация для критичных систем, регулярное резервное копирование.
          Организационные меры: назначен ответственный за обработку данных,
          обучение работников, разграничение доступа, внутренний контроль и
          аудит, журналирование всех действий с данными. При инциденте
          безопасности мы уведомляем Роскомнадзор в течение 24 часов и
          затронутых лиц в течение 72 часов с указанием характера инцидента,
          последствий и принятых мер.
        </p>
        <h2 className={styles.subtitle}>7. СРОКИ ХРАНЕНИЯ</h2>
        <p className={styles.paragraph}>
          Данные заказов: 3 года (требования налогового законодательства).
          Маркетинговые данные: до отзыва согласия. Технические логи: 1 год.
          Данные веб-аналитики: 2 года (обезличенно). Cookie: от нескольких
          часов до 2 лет. Незавершенные заказы: 30 дней. По истечении сроков
          данные удаляются из баз, стираются с носителей, факт уничтожения
          фиксируется актом. Данные могут храниться дольше при наличии
          неисполненных обязательств, для защиты прав в судебных спорах или по
          предписанию государственного органа.
        </p>
        <h2 className={styles.subtitle}>8. COOKIE И ВЕБ-ТЕХНОЛОГИИ</h2>
        <p className={styles.paragraph}>
          Cookie – небольшие файлы, которые Сайт сохраняет на вашем устройстве.
          Мы используем технические cookie (работа корзины, авторизация),
          функциональные (запоминание настроек), аналитические (анализ
          посещаемости в обезличенном виде) и маркетинговые (персонализация
          рекламы). Срок: от сессии до 2 лет. Вы можете управлять cookie через
          настройки браузера: принять все, отклонить необязательные, настроить
          по категориям, удалить установленные. Отключение технических cookie
          может нарушить работу Сайта. Отключение аналитических и маркетинговых
          не влияет на функциональность, но ограничивает персонализацию. Сайт
          может использовать cookie третьих сторон (сервисы аналитики, платежные
          системы, ретаргетинг). Эти сервисы имеют собственные политики
          конфиденциальности. Мы не контролируем и не несем ответственности за
          cookie третьих сторон.
        </p>
        <h2 className={styles.subtitle}>9. АВТОМАТИЗИРОВАННАЯ ОБРАБОТКА</h2>
        <p className={styles.paragraph}>
          Мы используем автоматизированную обработку для обработки заказов,
          персонализации подбора товаров, применения промокодов и специальных
          условий, выявления мошенничества, анализа предпочтений. Мы можем
          осуществлять профилирование для персонализации предложений,
          формирования рекомендаций, направления релевантной рекламы. Вы имеете
          право не подвергаться автоматизированным решениям, которые существенно
          затрагивают ваши права, требовать пересмотра решения с участием
          человека, выразить свою точку зрения, оспорить решение.
        </p>
        <h2 className={styles.subtitle}>10. МЕЖДУНАРОДНАЯ ПЕРЕДАЧА</h2>
        <p className={styles.paragraph}>
          Все персональные данные граждан РФ обрабатываются и хранятся на
          серверах на территории Российской Федерации в соответствии с частью 5
          статьи 18 Федерального закона №152-ФЗ. Мы не осуществляем
          трансграничную передачу, за исключением обезличенных данных для
          веб-аналитики или случаев, когда это необходимо для исполнения
          договора с вашим участием и вы дали письменное согласие.
        </p>
        <h2 className={styles.subtitle}>11. ИЗМЕНЕНИЯ В ПОЛИТИКЕ</h2>
        <p className={styles.paragraph}>
          Оператор вправе вносить изменения в Политику в одностороннем порядке.
          О существенных изменениях, влияющих на ваши права, мы уведомляем не
          менее чем за 30 дней через размещение уведомления на Сайте или
          направление email (для зарегистрированных пользователей). О
          несущественных изменениях (технические правки, уточнения) не
          уведомляем. Новая версия вступает в силу с момента размещения на
          Сайте. Изменения не распространяются на договоры, заключенные до
          вступления изменений в силу. Продолжение использования Сайта после
          вступления изменений в силу означает ваше согласие с новой версией
          Политики. Если вы не согласны, прекратите использование Сайта и
          направьте запрос на удаление данных. Предыдущие версии Политики
          доступны по запросу на hello@wowbox.market Действующая версия
          размещена на www.wowbox.market
        </p>
        <h2 className={styles.subtitle}>12. ДОПОЛНИТЕЛЬНЫЕ ПОЛОЖЕНИЯ</h2>
        <p className={styles.paragraph}>
          Предоставляя данные, вы обязуетесь предоставлять достоверную
          информацию, своевременно уведомлять об изменениях, не предоставлять
          данные третьих лиц без их согласия, обеспечивать конфиденциальность
          данных авторизации. Оператор не несет ответственности за убытки
          вследствие предоставления недостоверных данных, несанкционированный
          доступ по вине пользователя (передача данных авторизации третьим
          лицам), использование данных третьих лиц без их согласия, содержание
          сайтов третьих лиц. Сайт может содержать ссылки на сайты партнеров,
          платежных систем, социальных сетей. Мы не контролируем эти сайты и не
          несем ответственности за их политику конфиденциальности. Рекомендуем
          ознакомиться с их политиками перед предоставлением данных. Сайт
          предназначен для лиц старше 18 лет. Если вам не исполнилось 18 лет,
          получите согласие родителей или законных представителей. Если нам
          станет известно, что данные несовершеннолетнего собраны без согласия
          родителей, мы удалим эти данные. Настоящая Политика и споры
          регулируются законодательством РФ. Споры разрешаются по месту
          нахождения Оператора или по месту жительства субъекта данных (по
          выбору последнего). До обращения в суд обязательно соблюдение
          претензионного порядка. Срок рассмотрения претензии – 30 дней.
        </p>
        <h2 className={styles.subtitle}>13. КОНТАКТНАЯ ИНФОРМАЦИЯ</h2>
        <div className={styles.footer}>
          <p className={styles.footerTitle}>ООО "ИНВОРЛДС"</p>
          <p className={styles.footerText}>
            <strong>ОГРН:</strong> 1241600048689 | <strong>ИНН:</strong>{" "}
            1683023860
          </p>
          <p className={styles.footerText}>
            <strong>Адрес:</strong> 420500, Республика Татарстан, г. Иннополис,
            ул. Университетская, д. 5
          </p>
          <p className={styles.footerText}>
            <strong>Email:</strong>{" "}
            <a href="mailto:hello@wowbox.market">hello@wowbox.market</a>
          </p>
          <p className={styles.footerText}>
            <strong>Сайт:</strong>{" "}
            <a
              href="https://www.wowbox.market"
              target="_blank"
              rel="noopener noreferrer"
            >
              www.wowbox.market
            </a>
          </p>

          <div className={styles.separator}></div>

          <p className={styles.footerText}>
            Настоящая Политика является публичным документом, доступным на{" "}
            <a
              href="https://www.wowbox.market"
              target="_blank"
              rel="noopener noreferrer"
            >
              www.wowbox.market
            </a>{" "}
            Используя Сайт, оформляя заказ или взаимодействуя с Оператором, вы
            подтверждаете, что ознакомились с Политикой, понимаете ее содержание
            и даете согласие на обработку ваших персональных данных в
            соответствии с Политикой.
          </p>

          <p className={styles.footerText}>
            <strong>Дата вступления в силу:</strong> 29.11.2025 |{" "}
            <strong>Версия:</strong> 1.0
          </p>

          <p className={styles.copyright}>© 2024 WOWBOX. Все права защищены.</p>
        </div>
      </div>
    </div>
  );
}
